//GOLD GOLD GOLD
// Raw Gold Data
var rawGold = [
	{
	"Date": "2011-04-01",
	"Price": 1474.431
	},
	{
	"Date": "2011-05-01",
	"Price": 1512.188
	},
	{
	"Date": "2011-06-01",
	"Price": 1528.38
	}
]

//Extract Price from the Raw Gold Data
function push(array) {
	var gold = [];
	for(var i = 0; i<array.length; i++) {
		gold.push(array[i]["Price"]);
	}
	return gold;
}

//Define Variable for use in Pearson Correlation
var x = push(rawGold);
console.log(x);

//IRON IRON IRON
// Raw Iron Data
var rawIron = [
	{
	Date: "2011-04-01",
	Price: 109.53
	},
	{
	Date: "2011-05-01",
	Price: 100.9
	},
	{
	Date: "2011-06-01",
	Price: 96.26
	}
]

//Extract Price from the Raw Iron Data
function push(array) {
	var iron = [];
	for(var i = 0; i<array.length; i++) {
		iron.push(array[i]["Price"]);
	}
	return iron;
}

//Define Variable for use in Pearson Correlation
var y = push(rawIron);
console.log(y);




//PEARSON CORRELATION
function getPearsonCorrelation(x, y) {
    var shortestArrayLength = 0;
     
    if(x.length == y.length) {
        shortestArrayLength = x.length;
    } 
    else if(x.length > y.length) {
        shortestArrayLength = y.length;
        console.error('x has more items in it, the last ' + (x.length - shortestArrayLength) + ' item(s) will be ignored');
    } 
    else {
        shortestArrayLength = x.length;
        console.error('y has more items in it, the last ' + (y.length - shortestArrayLength) + ' item(s) will be ignored');
    }
  
    var xy = [];
    var x2 = [];
    var y2 = [];
  
    for(var i=0; i<shortestArrayLength; i++) {
        xy.push(x[i] * y[i]);
        x2.push(x[i] * x[i]);
        y2.push(y[i] * y[i]);
    }
  
    var sum_x = 0;
    var sum_y = 0;
    var sum_xy = 0;
    var sum_x2 = 0;
    var sum_y2 = 0;
  
    for(var i=0; i< shortestArrayLength; i++) {
        sum_x += x[i];
        sum_y += y[i];
        sum_xy += xy[i];
        sum_x2 += x2[i];
        sum_y2 += y2[i];
    }
  
    var step1 = (shortestArrayLength * sum_xy) - (sum_x * sum_y);
    var step2 = (shortestArrayLength * sum_x2) - (sum_x * sum_x);
    var step3 = (shortestArrayLength * sum_y2) - (sum_y * sum_y);
    var step4 = Math.sqrt(step2 * step3);
    var answer = step1 / step4;
    
      console.log(answer);
      return answer;
}
 
var result = getPearsonCorrelation(x, y)
console.log(result)
// zValues[0][1]